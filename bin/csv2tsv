#!/usr/bin/env perl
use warnings;
use strict;

use Text::CSV_XS;

my $csv = Text::CSV_XS->new({ binary => 1, auto_diag => 1 });
while (my $row = $csv->getline(\*ARGV)) {
    print(join("\t", map { trim_normalize($_) } @$row), "\n");
}

sub trim_normalize {
    my ($string) = @_;
    $string =~ s{\A\s+}{}s;
    $string =~ s{\s+\z}{}s;
    $string =~ s{\s+}{ }gs;
    return $string;
}
